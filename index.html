<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Monster BigBoard - VIP Dashboard</title>
<style>
  :root{--bg:#0f0f0f;--text:#eee;--muted:#bdbdbd;--card:#1b1b1b;--card2:#262626;--line:#2a2a2a;--accent:#ffcc00;--sidebar:#141414}
  *{box-sizing:border-box}html,body{height:100%;margin:0}
  body{background:var(--bg);color:var(--text);font-family:Arial,sans-serif}
  .container{display:grid;grid-template-columns:250px 1fr;grid-template-rows:60px 1fr;height:100vh}
  header{grid-column:1/3;background:#101010;border-bottom:1px solid #333;display:flex;align-items:center;padding:0 20px;justify-content:space-between}
  h1{color:var(--accent);margin:0;font-size:1.5em}
  .sidebar{background:var(--sidebar);border-right:1px solid #333;padding:20px;overflow-y:auto}
  .main{padding:20px;overflow-y:auto}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:15px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:15px;cursor:pointer;transition:0.3s;position:relative}
  .card:hover{background:var(--card2);transform:translateY(-2px)}
  .badge{position:absolute;top:10px;right:10px;padding:2px 8px;border-radius:4px;font-size:0.7em;font-weight:bold;color:#000}
  .badge.ONLINE{background:#4caf50}
  .badge.PREMIUM{background:#9c27b0}
  .badge.CUSTOM{background:#ff9800}
  .icon{font-size:2em;margin-bottom:10px}
  .title{font-weight:bold;margin-bottom:5px;color:var(--accent)}
  .subtitle{color:var(--muted);font-size:0.9em;line-height:1.3}
  .details{margin-top:10px;padding-top:10px;border-top:1px solid var(--line);font-size:0.85em;color:#999}
  .category{padding:12px;margin:5px 0;background:#1a1a1a;border-radius:8px;cursor:pointer;display:flex;justify-content:space-between}
  .category:hover{background:#222}
  .category.active{border:2px solid var(--accent);padding:10px}
  .search{background:#111;border:1px solid #333;color:#fff;padding:8px;border-radius:6px;width:300px}
  .btn{background:var(--card);border:1px solid var(--line);color:var(--text);padding:8px 15px;border-radius:6px;cursor:pointer;margin:0 5px}
  .btn:hover{background:var(--card2)}
  .stats{background:#1a1a1a;padding:10px 20px;margin-bottom:20px;border-radius:8px;display:flex;justify-content:space-between;align-items:center}
  .chat-widget{position:fixed;bottom:20px;right:20px;width:350px;height:500px;background:var(--card);border:2px solid var(--accent);border-radius:12px;display:none;flex-direction:column;z-index:1000;box-shadow:0 5px 20px rgba(0,0,0,0.5)}
  .chat-widget.open{display:flex}
  .chat-header{background:var(--accent);color:#000;padding:15px;font-weight:bold;display:flex;justify-content:space-between;align-items:center;border-radius:10px 10px 0 0}
  .chat-messages{flex:1;overflow-y:auto;padding:15px}
  .chat-input-area{display:flex;padding:10px;border-top:1px solid var(--line)}
  .chat-input{flex:1;background:#111;border:1px solid #333;color:#fff;padding:8px;border-radius:6px}
  .bot-toggle{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background:var(--accent);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:1.5em;z-index:999;box-shadow:0 3px 10px rgba(255,204,0,0.3)}
  .bot-toggle:hover{transform:scale(1.1)}
  .filter-bar{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}
  .filter-btn{padding:6px 12px;background:#1a1a1a;border:1px solid #333;border-radius:6px;cursor:pointer;font-size:0.9em}
  .filter-btn:hover{background:#222}
  .filter-btn.active{background:var(--accent);color:#000;border-color:var(--accent)}
</style>
</head>
<body>

<div class="container">
  <header>
    <h1>üöÄ Monster BigBoard</h1>
    <div>
      <input type="text" class="search" id="searchInput" placeholder="Hledat v produktech...">
      <select id="typeFilter" class="btn">
        <option value="">V≈°echny typy</option>
        <option value="ONLINE">Online</option>
        <option value="PREMIUM">Premium</option>
        <option value="CUSTOM">Custom</option>
      </select>
      <button class="btn" onclick="location.reload()">üîÑ Obnovit</button>
    </div>
  </header>

  <div class="sidebar" id="sidebar">
    <h3 style="color:var(--accent);margin-top:0">üìÅ Kategorie</h3>
    <div id="categories">
      <div style="color:#666;padding:20px">Naƒç√≠t√°m kategorie...</div>
    </div>
  </div>

  <div class="main" id="main">
    <div class="stats" id="stats">
      <span>Naƒç√≠t√°m produkty...</span>
    </div>
    <div class="filter-bar" id="filterBar"></div>
    <div class="grid" id="productGrid">
      <div style="color:#666;padding:40px;text-align:center">
        ‚è≥ Naƒç√≠t√°m data z JSON soubor≈Ø...
      </div>
    </div>
  </div>
</div>

<!-- Chat Bot -->
<div class="bot-toggle" onclick="toggleChat()">üí¨</div>
<div class="chat-widget" id="chatWidget">
  <div class="chat-header">
    <span>ü§ñ VIP Asistent</span>
    <span style="cursor:pointer" onclick="toggleChat()">‚úñ</span>
  </div>
  <div class="chat-messages" id="chatMessages">
    <div style="background:#222;padding:10px;border-radius:8px;margin-bottom:10px">
      üëã Ahoj! Jsem VIP asistent. Jak v√°m mohu pomoci s v√Ωbƒõrem produkt≈Ø?
    </div>
  </div>
  <div class="chat-input-area">
    <input type="text" class="chat-input" id="chatInput" placeholder="Napi≈°te zpr√°vu..." onkeypress="if(event.key==='Enter')sendMessage()">
    <button class="btn" onclick="sendMessage()" style="background:var(--accent);color:#000">Odeslat</button>
  </div>
</div>

<script>
// Glob√°ln√≠ promƒõnn√©
let allProducts = [];
let categories = {};
let currentCategory = 'all';
let currentFilters = {
  type: '',
  audience: '',
  search: ''
};

// HLAVN√ç NAƒå√çTAC√ç FUNKCE - OPRAVEN√Å PRO VA≈†E DATA
async function initApp() {
  console.log('üöÄ Spou≈°t√≠m aplikaci...');

  // Cesty k soubor≈Øm
  const basePath = window.location.hostname.includes('github.io') 
    ? '/monster-bigboard-data/' 
    : './';

  const files = [
    'final_catalog.json',
    'market.json', 
    'catalog.json',
    'data.json'
  ];

  let dataLoaded = false;

  // Zkus naƒç√≠st soubory
  for (const file of files) {
    try {
      const url = basePath + file;
      console.log('üìÇ Zkou≈°√≠m naƒç√≠st:', url);

      const response = await fetch(url);
      if (!response.ok) continue;

      const data = await response.json();
      console.log(`‚úÖ Naƒçteno z ${file}:`, data);

      // Zpracuj r≈Øzn√© form√°ty dat
      if (Array.isArray(data)) {
        // P≈ô√≠mo pole produkt≈Ø
        allProducts = data;
        dataLoaded = true;
        break;
      } else if (data.categories) {
        // Form√°t s kategoriemi
        allProducts = [];
        data.categories.forEach(cat => {
          if (cat.items) {
            cat.items.forEach(item => {
              item.section = item.section || cat.title || cat.key;
              allProducts.push(item);
            });
          }
        });
        dataLoaded = true;
        break;
      } else if (data.products) {
        // Form√°t s products
        allProducts = data.products;
        dataLoaded = true;
        break;
      }
    } catch (error) {
      console.error(`‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ ${file}:`, error);
    }
  }

  // Pokud se nepoda≈ôilo naƒç√≠st, zkus GitHub raw
  if (!dataLoaded && window.location.hostname.includes('github.io')) {
    try {
      console.log('üåê Zkou≈°√≠m GitHub raw...');
      const response = await fetch('https://raw.githubusercontent.com/Levon1488/monster-bigboard-data/main/final_catalog.json');
      if (response.ok) {
        allProducts = await response.json();
        dataLoaded = true;
      }
    } catch (error) {
      console.error('‚ùå GitHub raw selhal:', error);
    }
  }

  // Pokud st√°le nic, pou≈æij demo data
  if (!dataLoaded || allProducts.length === 0) {
    console.log('üì¶ Pou≈æ√≠v√°m demo data');
    allProducts = getDemoData();
  }

  console.log(`‚ú® Celkem naƒçteno produkt≈Ø: ${allProducts.length}`);

  // Zpracuj a zobraz data
  processProducts();
  renderCategories();
  renderProducts();
  updateStats();
}

// Demo data jako z√°loha
function getDemoData() {
  return [
    {section:"A. Tipy na nemovitosti",type:"ONLINE",audience:"BOTH",title:"Fresh Pack ‚Äì Okresn√≠ monitoring",short:"Denn√≠ sledov√°n√≠ nov√Ωch nab√≠dek v okrese",what:"Automatick√Ω monitoring v≈°ech port√°l≈Ø",how:"Doruƒçen√≠ 2x dennƒõ email/WhatsApp",why:"Z√≠sk√°te p≈ô√≠le≈æitosti d≈ô√≠v ne≈æ konkurence",icon:"üè†"},
    {section:"A. Tipy na nemovitosti",type:"PREMIUM",audience:"INVESTOR",title:"VIP Hunter",short:"Exkluzivn√≠ off-market nab√≠dky",what:"S√≠≈• kontakt≈Ø hl√°s√≠ nemovitosti p≈ôed zve≈ôejnƒõn√≠m",how:"Okam≈æit√© upozornƒõn√≠ 24/7",why:"Nejlep≈°√≠ deals nikdy nejdou na ve≈ôejn√Ω trh",icon:"üíé"},
    {section:"B. Datab√°ze",type:"ONLINE",audience:"MAKLER",title:"Datab√°ze majitel≈Ø",short:"Kontakty na majitele nemovitost√≠",what:"Ovƒõ≈ôen√© kontakty vƒçetnƒõ telefon≈Ø a email≈Ø",how:"Excel export, mƒõs√≠ƒçn√≠ aktualizace",why:"P≈ô√≠m√© osloven√≠ = vy≈°≈°√≠ provize",icon:"üìä"},
    {section:"C. N√°stroje",type:"PREMIUM",audience:"INVESTOR",title:"ROI Kalkul√°tor Pro",short:"Pokroƒçil√Ω n√°stroj pro anal√Ωzu investic",what:"Excel s 50+ metrikami",how:"Download + video tutori√°l",why:"Profesion√°ln√≠ anal√Ωza investic",icon:"üìà"},
    {section:"D. Vzdƒõl√°v√°n√≠",type:"ONLINE",audience:"BOTH",title:"Realitn√≠ akademie",short:"Online kurz pro zaƒç√°teƒçn√≠ky",what:"20 hodin video obsahu",how:"P≈ô√≠stup na 12 mƒõs√≠c≈Ø",why:"Nauƒçte se od prof√≠k≈Ø",icon:"üéì"}
  ];
}

// Zpracov√°n√≠ produkt≈Ø
function processProducts() {
  categories = {};

  allProducts.forEach(product => {
    const cat = product.section || 'Ostatn√≠';
    if (!categories[cat]) {
      categories[cat] = [];
    }
    categories[cat].push(product);
  });

  console.log('üìä Kategorie:', Object.keys(categories));
}

// Vykreslen√≠ kategori√≠
function renderCategories() {
  const container = document.getElementById('categories');

  // Tlaƒç√≠tko pro v≈°echny
  let html = `
    <div class="category active" onclick="selectCategory('all', this)">
      <span>‚≠ê V≈°echny produkty</span>
      <span>${allProducts.length}</span>
    </div>
  `;

  // Jednotliv√© kategorie
  Object.keys(categories).sort().forEach(cat => {
    const count = categories[cat].length;
    const icon = cat.includes('Tipy') ? 'üè†' : 
                 cat.includes('Datab√°ze') ? 'üìä' :
                 cat.includes('N√°stroje') ? 'üõ†Ô∏è' :
                 cat.includes('Vzdƒõl√°v√°n√≠') ? 'üéì' : 'üìÅ';

    html += `
      <div class="category" onclick="selectCategory('${cat}', this)">
        <span>${icon} ${cat.replace(/^[A-Z]\.\s*/, '')}</span>
        <span>${count}</span>
      </div>
    `;
  });

  container.innerHTML = html;
}

// V√Ωbƒõr kategorie
function selectCategory(category, element) {
  currentCategory = category;

  // Oznaƒç aktivn√≠
  document.querySelectorAll('.category').forEach(c => c.classList.remove('active'));
  if (element) element.classList.add('active');

  renderProducts();
  updateStats();
}

// Vykreslen√≠ produkt≈Ø
function renderProducts() {
  const grid = document.getElementById('productGrid');
  const search = document.getElementById('searchInput').value.toLowerCase();
  const typeFilter = document.getElementById('typeFilter').value;

  // Filtrov√°n√≠
  let filtered = currentCategory === 'all' 
    ? [...allProducts]
    : categories[currentCategory] || [];

  // Filtr podle hled√°n√≠
  if (search) {
    filtered = filtered.filter(p => {
      const searchIn = [
        p.title, p.short, p.what, p.how, p.why,
        p.section, p.type, p.audience
      ].join(' ').toLowerCase();
      return searchIn.includes(search);
    });
  }

  // Filtr podle typu
  if (typeFilter) {
    filtered = filtered.filter(p => p.type === typeFilter);
  }

  // Vykresli karty
  if (filtered.length === 0) {
    grid.innerHTML = '<div style="grid-column:1/-1;text-align:center;padding:40px;color:#666">≈Ω√°dn√© produkty nenalezeny üîç</div>';
    return;
  }

  grid.innerHTML = filtered.map(product => {
    const icon = product.icon || 
                (product.type === 'ONLINE' ? 'üåê' :
                 product.type === 'PREMIUM' ? 'üíé' : 
                 product.type === 'CUSTOM' ? 'üîß' : 'üì¶');

    return `
      <div class="card" onclick="showProduct('${encodeURIComponent(JSON.stringify(product))}')">
        <div class="badge ${product.type || 'ONLINE'}">${product.type || 'ONLINE'}</div>
        <div class="icon">${icon}</div>
        <div class="title">${product.title || 'Bez n√°zvu'}</div>
        <div class="subtitle">${product.short || product.subtitle || ''}</div>
        ${product.what ? `<div class="details"><strong>Co:</strong> ${product.what.substring(0,100)}...</div>` : ''}
        ${product.audience ? `<div class="details"><strong>Pro:</strong> ${product.audience === 'BOTH' ? 'V≈°echny' : product.audience}</div>` : ''}
      </div>
    `;
  }).join('');
}

// Zobrazen√≠ produktu
function showProduct(encodedProduct) {
  try {
    const product = JSON.parse(decodeURIComponent(encodedProduct));
    document.getElementById('chatWidget').classList.add('open');

    const message = `
      <div style="background:#1a1a1a;padding:15px;border-radius:8px;border-left:3px solid var(--accent)">
        <strong style="color:var(--accent)">${product.title}</strong><br>
        <small>${product.short || ''}</small><br><br>
        ${product.what ? `<strong>Co to je:</strong> ${product.what}<br><br>` : ''}
        ${product.how ? `<strong>Jak to funguje:</strong> ${product.how}<br><br>` : ''}
        ${product.why ? `<strong>Proƒç to pot≈ôebujete:</strong> ${product.why}` : ''}
      </div>
      <div style="margin-top:10px">M√°m z√°jem o tento produkt. Chci v√≠ce informac√≠ nebo rovnou objednat.</div>
    `;

    addMessage(message, 'bot');
  } catch (error) {
    console.error('Chyba p≈ôi zobrazen√≠ produktu:', error);
  }
}

// Aktualizace statistik
function updateStats() {
  const filtered = currentCategory === 'all' 
    ? allProducts.length
    : (categories[currentCategory] || []).length;

  document.getElementById('stats').innerHTML = `
    <span>üìä Zobrazeno: <strong>${filtered}</strong> z ${allProducts.length} produkt≈Ø</span>
    <span>üìÅ Kategorie: <strong>${currentCategory === 'all' ? 'V≈°echny' : currentCategory.replace(/^[A-Z]\.\s*/, '')}</strong></span>
  `;
}

// Chat funkce
function toggleChat() {
  document.getElementById('chatWidget').classList.toggle('open');
}

function sendMessage() {
  const input = document.getElementById('chatInput');
  const message = input.value.trim();
  if (!message) return;

  addMessage(message, 'user');
  input.value = '';

  // Bot odpovƒõƒè
  setTimeout(() => {
    let response = 'Dƒõkuji za zpr√°vu. N√°≈° t√Ωm v√°m odpov√≠ do 24 hodin.';

    if (message.toLowerCase().includes('cena') || message.toLowerCase().includes('kolik')) {
      response = 'Ceny na≈°ich produkt≈Ø jsou individu√°ln√≠ podle rozsahu. Napi≈°te mi, kter√Ω produkt v√°s zaj√≠m√°, a po≈°lu v√°m konkr√©tn√≠ nab√≠dku.';
    } else if (message.toLowerCase().includes('koupit') || message.toLowerCase().includes('objednat')) {
      response = 'Skvƒõl√©! Pro objedn√°vku pros√≠m napi≈°te:<br>1. N√°zev produktu<br>2. V√°≈° email<br>3. Telefon<br><br>Ozveme se v√°m do 1 hodiny.';
    } else if (message.toLowerCase().includes('ahoj') || message.toLowerCase().includes('dobr√Ω')) {
      response = 'Dobr√Ω den! Jak v√°m mohu pomoci? Hled√°te nƒõjak√Ω konkr√©tn√≠ produkt nebo pot≈ôebujete poradit?';
    }

    addMessage(response, 'bot');
  }, 1000);
}

function addMessage(text, sender) {
  const messages = document.getElementById('chatMessages');
  const messageDiv = document.createElement('div');
  messageDiv.style.cssText = sender === 'user' 
    ? 'text-align:right;margin:10px 0' 
    : 'margin:10px 0';
  messageDiv.innerHTML = `
    <div style="background:${sender === 'user' ? '#333' : '#222'};padding:12px;border-radius:8px;display:inline-block;max-width:80%">
      ${text}
    </div>
  `;
  messages.appendChild(messageDiv);
  messages.scrollTop = messages.scrollHeight;
}

// Event listeners
document.getElementById('searchInput').addEventListener('input', () => {
  renderProducts();
  updateStats();
});

document.getElementById('typeFilter').addEventListener('change', () => {
  renderProducts();
  updateStats();
});

// SPU≈†TƒöN√ç APLIKACE
initApp();
</script>

</body>
</html>







